# 表单中心

## 1.功能概述

表单中心是对系统内所有表单进行统一管理的入口。主要提供两个关键功能：创建表单及管理表单。

如图【表单中心】所示，点击左侧边栏上的【表单】，切换到表单中心界面。

![](/articles/form/3-/images/image4.png)

表单中心

## 2.界面说明

表单中心界面如【表单中心】所示，所有表单按照设定的分类依次排列在界面上。

点击界面左上方的新建分类，为表单创建一个新分类，点击新建表单则在选中的分类下面创建一个新表单。

选中表单后在表单的下方浮动菜单，默认显示编辑、填表单、停用，将鼠标放到最右边的点上面，显示更多操作，包括关联流程、分享和删除，点击链接进入相应的操作界面。

根据表单的类型及状态的不同，菜单显示有些许差异。

在每个表单上都有一个数字，这个数字代表表单中已经存入的数据的条数，点击可以查看表单的列表界面。


## 3.表单中心功能

下面具体描述一下表单中心的主要功能和操作过程。

### 3.1  新建分类

为表单创建一个新分类。

点击【表单中心】中的【新建分类】，在按钮下面出现一个文本输入框，如图【创建分类】所示。输入新分类后按回车键，或用鼠标点击界面其他地方，使本文框失去焦点后，系统提示“新建分类成功”；

分类名称后面有个“（3）”，表示在这个分类下面有三张表单。

取消新建：点击新建分类，界面出现文本输入框后，按Esc键或鼠标点击界面其他地方，取消本次操作；

删除分类：将鼠标放到分类名称上时，在名称的最右边出现一个![](/articles/form/3-/images/image5.png) ，点击这个按钮删除分类。



![](/articles/form/3-/images/image7.png)

创建分类

### 3.2  新建表单

在图【表单中心】中，点击【新建表单】，输入表单名称，选择一个表单分类后点【保存】，表单创建成功，进入表单设计器界面，进行表单样式的设计。

表单设计器的内容在后面章节里详细描述。

![](/articles/form/3-/images/image8.png)

创建表单

**表单名称**：表单的标题，表单在表单中心中显示的名称及运行时的标题，可通过重命名功能进行修改。

**表单描述**：关于表单的一些描述文字。

**分类**：表单的分类，下拉框选择，系统中已经定义好的所有的表单分类，定义后在表单设计器中可以修改。

在完成所有信息录入后，单击【保存】按钮以保存信息。

### 3.3  编辑表单

如图【表单中心】所示，选择需要修改表单定义的表单，将鼠标放到表单上面，在浮出的菜单上点击【编辑】按钮，系统弹出表单设计器，对表单的样式进行修改，修改完成后点【保存】按钮，保存设计。表单设计器的具体内容，见后续章节的详细描述。

### 3.4  删除表单

系统约定，停用状态的表单允许删除，而启用状态的表单不允许删除。因此当表单状态为启用时，系统不提供删除表单的功能，而表单状态为停用时，在【表单中心】，选择需要删除表单定义的表单，将鼠标放到浮出菜单的【┇】项上，在浮出的菜单上点击【删除】按钮，系统弹出表单删除成功的提示，表单删除成功！


### 3.5  表单分享

系统约定，仅数据收集的表单允许分享。

如图【表单中心】所示，将鼠标放到数据收集的表单上面，在浮出的菜单上点击【分享】按钮，系统弹出如图【表单分享】所示的界面。

![](/articles/form/3-/images/image11.png)

表单分享

扫描图中的二维码可以将表单通过微信、QQ、友空间、微博发送给朋友或分享到朋友圈，或者复制链接通过邮件的方式发送给需要分享的人。

手机上的效果图如图【手机效果】所示。

![](/articles/form/3-/images/image12.png)

手机效果

分享的手机用户或PC端用户填写完表单提交后，在表单管理中心的对应表单里，可以看到所有用户提交的表单数据。

![](/articles/form/3-/images/image13.png)

表单列表界面

在表单管理中心，点击表单中的数字，弹出如图【表单列表界面】所示的界面。填写人为空的为分享用户填写的，而不为空的为登陆用户填写的。

系统同时提供了将列表中显示的数据，导到到Excel文件的功能，点击【导出】按钮即可完成此功能。

点击【返回】按钮，回到表单管理中心。



### 3.6  表单设计

表单的新增有：模板新增和直接拖拽控件新增两种方式，一般可归纳为以下几个步骤：

1 模板新增：

选择模板—>使用模板—>调整控件—>调整控件属性—>调整表单属性（包括关联流程等）—>保存表单设计—>预览表单

2、直接拖拽控件新增：

拖拽布局—>调整布局属性—>拖拽控件—>调整控件属性—>调整表单属性（包括关联流程等）—>保存表单设计—>预览表单

模板新增时，新建表单保存后，或者在模板中心选择模板，点【立即使用】，系统进入表单设计器。表单设计器界面如图【表单设计器】所示。


![](/articles/form/3-/images/image14.png)

表单设计器

这个界面分为三个区域：

**属性区**：用于定义表单的属性，以及表单中使用的控件的属性；

**画布**：进行表单设计的区域，在这个区域中可以根据需要，拖入布局及控件，设计出需要的表单；

**操作区**：提供功能控件，保存、保存并启用、预览已经设计好的表单，将表单另存为模板，同时提供了通过选择预置的模板新增表单的功能。


下面分别来讲述一下两种表单的创建方式：模板新增和通过拖拽控件直接新增。


#### 3.6.1  模板新增

点击图【表单设计器】操作区左边的【选择模板】，系统弹出图【表单模板】窗口。

![](/articles/form/3-/images/image15.png)

表单模板

这个窗口中的内容分为三个部分，最左边一列是模板分类，中间一列是这个分类下的所有模板，最右边一列是选中模板的运行时样式。

选中模板后，点模板样式下面的【立即使用】，这个模板就会被拉到设计器的画布上来，然后对这个模板上的控件及控件属性进行微调，就变成我们需要的表单了，点击操作区的【保存】或【保存并启用】按钮，表单的设计就完成了。

对表单属性、控件属性的说明请见后面章节。


####3.6.2  表单属性

前面我们提到，图【表单设计器】中有三个区域，我们先来看下属性区。

属性区通过三个页签来定义表单及控件：包括表单的属性、控件的属性及设置（目前暂未开放，敬请等待！）

如图【表单属性】所示，表单属性定义作用于整个表单的属性，比如是否关联流程，是否可以被其他表单关联引用等。

**表单标题**：表单的标题，新建表单时输入，表单管理中心、发起审批中均使用的这个名称。修改表单标题，只影响上述几个地方的显示。而运行时表单上的名称是在设计器的画布上定义的，默认为表单标题，可以修改为与表单标题不一致的名称。

**表单描述**：关于表单的一些描述文字；

**表单分类**：新建表单时选择的分类，可以修改；下拉框内显示的是系统内创建的表单分类；

**可以被其他表单关联引用：**定义当前表单的数据是否可以在其他表单里使用。当勾选了此属性后，在【关联】控件，“选择要关联的表单或对象”时，就可以选到这个表单；默认不勾选；

**提交后显示反馈界面：**用于定义PC端表单提交后是否显示谢谢页及谢谢页中的显示内容（如图【表单属性】所示），默认不勾选；

![](/articles/form/3-/images/image16.png)

表单属性


**移动端布局设置：**用于定义当前表单在移动端显示的字段，只能在原表单定义的基础上做减法，不能添加字段；

**表单图标：**用于定义显示在表单管理中心上的表单图标。系统有默认图标，需要修改时，点击其旁边的【设置】按钮进行修改；

**关联流程/数据收集：**这两个属性是互斥的，用于定义当前表单是数据收集的表单还是关联流程的表单；如果选择了关联流程，则需要进一步定义是固定流程还是自由流程，具体内容在后面会讲述；

**全部人员可使用/部分人员可使用：**这两个属性是互斥的，用于定义当前表单的使用权限。默认全部人员可使用。当选择“部分人员可使用”时，可以从部门及用户两个维度来定义。

**<li>移动端布局设置**
如图【表单属性】所示，点击“移动端布局”旁边的【设置】按钮，可以看到如图【设置移动端布局】所示的界面：

在左侧列选择需要在移动端显示的字段，点击【>>】将字段加入右侧列，然后保存即可。也可取消选择左侧字段，点击【保存】。

设置移动端布局时，设置的是最新版本的移动端布局，最新版本在点击【保存并启用】按钮后，对于新发起的单据生效，而查看之前 使用老版本创建的单据时，仍按老版本显示。

![](/articles/form/3-/images/image9.png)

设置移动端布局

**<li>关联流程**

表单从应用角度来说，支持两大类应用场景：一类是数据收集，一类是流程表单。根据应用场景的不同，表单在定义时就区分为数据收集表单和流程表单。

对于流程表单来说，我们不但支持预先定义好的固定流程，还支持由发起人定义的自由流程。

固定流程：是指流程按照预先设置好的审批顺序自动流转，审批人在审批时，不能对已经定义好的流程进行更改，但可以进行同意、改派、加签、指派、驳回等操作。适用于审批人比较固定或者审批流程比较严格的事项，可以保证流程的规范。

自由流程顾名思义，就是审批流程不固定，由发起人在提交表单时根据业务需要自行指定审批人及审批步骤，适用于审批人不固定的特殊流程。目前自由流程只支持按选人顺序执行的顺序流，且审批时只支持同意和驳回到发起人的操作。

1、关联自由流程

在图【表单中心】所示的界面选择“关联流程”后，表单的属性界面如图【关联流程】所示。继续点击【使用自由流程】按钮，界面如图【关联自由流程】所示。

![](/articles/form/4-2/images/image_gllc03.png)

关联流程


![](/articles/form/4-2/images/image_gllc04.png)

关联自由流程

以普通用户的身份登录，在发起自由流程表单的界面，通过点击图【发起自由流程】中红框圈出的部分的 “+”进入到选人的界面，选择审批人。提交后单据将按照界面选人的顺序进行流转。

![](/articles/form/4-2/images/image_gllc06.png)


发起自由流程


2、关联固定流程

在图【关联流程】所示的界面选择“创建新流程”之前，需要在它上面的文本框内输入一个新创建的流程名称，然后再点击【创建新流程】按钮，进入到用友云审批中定义新流程，如图【流程设计器】所示。

![](/articles/form/4-2/images/image_gllc09.png)

流程设计器

根据实际业务需要定义流程，定义完后点击界面右上角的【保存并发布】按钮，关掉流程设计器回到表单设计器，界面如图【关联固定流程】所示。

图【关联固定流程】所示界面右边红框标出的关联流程的区域，因关联了固定流程而发生了变化，针对于已经关联的流程，可以编辑流程、删除流程及设置流程环节中表单的字段权限。

![](/articles/form/4-2/images/image_gllc10.png)

关联固定流程

设置完成后，点击【保存并启用】或【保存】按钮，保存当前对表单及流程进行的修改。



3、编辑流程

用于修改关联的流程，点击该按钮，同样是打开用友云审批中的流程设计器对已经关联的流程进行编辑。



4、删除流程

点击【删除流程】按钮，完成解除关联流程的操作。



5、字段权限

用于设置表单字段在填表单环节及流程各个环节的可见性及可编辑性。如图【字段设置】所示。第三行是表单关联的流程中的各个环节，每个字段都有三种状态：编辑、查看和隐藏。

定义时，先选择一个状态：编辑、查看或隐藏，然后再选择一个字段，最后再定义该字段在流程哪个环节生效，设置后，下面的状态一览表中的状态随设置实时发生变化。设置好后，运行时打开表单时会根据登陆人所在的流程环节，按设置好的权限显示该用户可见及可编辑的字段。

![](/articles/form/3-/images/image101.png)

字段权限


####3.6.3 布局和控件属性

表单是由布局和控件组成的。布局决定了整个表单的样式，控件决定了表单上的元素的样式及类型。

云表单支持五个布局：一行两列、一行三列、明细子表、表格、分割线。

支持单行文本、多行文本、金额、数值、日期、日期区间、手机、电话、邮箱、选项、描述、密码、超链接、百分比、评分、图片上传、制单人、制单人部门、制单部门负责人、制单人职务、自动编号、关联、关联字段、审批意见、用户、部门等控件。

#### **<li>布局属性**


云表单的布局除了明细子表和分割线可以设置属性外，其他几种不需要设置属性。

从布局中将明细子表拖入画布，在明细子表布局下面有四个图标按钮，按钮的含义如图【明细子表布局】所示。


![](/articles/form/3-/images/image17.png)

明细子表布局

点击【编辑子表属性】可以看到控件的属性区如图【子表属性区】所示。

![](/articles/form/3-/images/image18.png)

子表属性区

**名称：**明细子表的名称，默认明细子表，可修改。在流程字段权限设置时，用该名称来区分表单上的不同明细子表。

**显示序号：**明细子表布局的特性，用于定义子表最左边是否显示序号，默认不显示。

**默认行数：**明细子表布局的特性，用于定义表单中默认显示明细子表的行数，默认为1行。

**增加子表列：**明细子表布局默认显示两列，当子表的列数多于两列时，要先增加列数，然后再往布局上拖入控件。



#### **<li>控件属性**

控件属性用于定义控件在当前表单中的属性，比如控件标题的显示位置，是否必输、是否显示在列表或任务标题中等。

选中一个控件，在表单设计器的属性区的【控件】页签下面，会显示选中控件的属性，如图【金额控件属性】所示。



![](/articles/form/3-/images/image19.png)

金额控件属性

对于控件来说，所有的属性可分为公共属性和每个控件特有的属性。比如前面说到的是否必输，控件示题显示位置等，是每个控件都会涉及到的，而像是否显示金额大写、是否计算等属性，则是金额控件所特有的。

下面我们就来分别讲一下控件的公共属性和特有属性：

**1、公共特性：**

**标题在左边**：用于定义控件的标题的显示位置，勾选此项时，标题显示在输入框的左边，不勾时显示在输入框的上方；

**必填**：用于定义当前选中控件是否必输；

**在列表或任务标题中显示**：用于定义当前选中控件在表单的列表界面或工作中心的任务标题中是否显示。

**提示文字：**设置运行时控件背景上的提示文字；

**尺寸：**设置控件在运行时显示的大小；

**边框颜色：**设置控件边框的颜色。


**2、特有属性**

**小数位数**：金额或数值控件特有的属性，用于定义小数的位数；金额控件默认为2位，数值控件默认为0位；

**显示金额大写**：金额控件特有属性，用于定义当前控件是否显示为金额的大写，如果勾选此项，还需要定义将哪个字段的值转换为大写。（见图【金额控件的特有属性】）

**计算：**金额和数值控件的特有属性。用于定义控件的值是否由计算得出。勾选该项表明该值是通过计算得出，需要继续定义该值是通过什么样的运算得到的。下拉框内列出的是与该控件同处于表单主或明细子表中的所有数值或金额控件，点击下拉框旁边的“+”，可以增加取值，两个取值之前用运算符连接。

**最大值/最小值：**金额和数值控件的特有属性，用于定义输入的最大值/最小值；

**列运算：**金额和数值控件的特有属性，控件放到明细子表中出现，用于定义子表明细列是否需要计算合计、最大值、最小值或平均值。

**主表字段：**金额和数值控件的特有属性，勾选了列运算后出来。用于定义子表的列运算值需要存入主表的哪个字段上，为空时表示不需要保存。

**子表中是否显示：**金额和数值控件的特有属性，勾选了列运算后出现。用于定义列运算结果在子表中是否显示。默认勾选。


![](/articles/form/3-/images/image21.png)

金额控件的特有属性

3、其他控件的特有属性

**风格**：选项控件特有的属性。用于定义选项控件是以下拉框还是单选（多选）的方式展现。

**多选**：选项控件特有的属性。用于定义该控件是否支持选择多条数据。

**选项设置**：选项控件特有的属性。用于定义下拉框或单选（多选）的待选值。（见下图）

![](/articles/form/3-/images/image22.png)

选项控件的特有属性

####3.6.4 直接拖拽控件新增

前面几个章节已经把表单及控件的属性介绍完了，下面我们开始通过拖拽控件来创建表单。

![](/articles/form/3-/images/image102.png)
差旅费报销单

我们利用文本、日期、制单人、制单人所在部门、日期差、审批意见、金额等控件，创建一个差旅费报销单，如图【差旅费报销单】所示。

要求：

<li> 姓名和部门为制单人及制单人所在部门控件，系统自动取数，无需填写；

<li>  出差天数为：出差结束日期与出差开始日期的差值，通过日期差控件实现；

<li>  报销总金额为出差明细金额的总和，并且为大写，通过明细子表传入；

<li>  出差明细默认两行；

<li>  部门经理和财务经理的审批意见能在部门经理、财务经理审批后，回写到表单的相应位置；通过审批意见控件来实现；



具体步骤：

1、新建表单分类“培训用例”。点击表单管理->新建分类，在下面的框中输入“培训用例”点击空白处即保存了。

![](/articles/form/3-/images/image103.png)





